div(class="sales-section section")
  h2(class="page-header") {{ 'SALES' | translate }}
  uib-tabset(active="active")
    uib-tab(index="1", heading="{{ 'SALES' | translate }}")
      br
      div(class="row")
        div(class="col-sm-9 col-sm-offset-3")
          div(class="btn-group pull-right", uib-dropdown)
            button(id="single-button", type="button", class="btn btn-primary", uib-dropdown-toggle, ng-disabled="disabled") &nbsp; {{Â 'ACTIONS' | translate }} &nbsp;
              span(class="caret")
            ul(class="dropdown-menu", uib-dropdown-menu, role="menu", aria-labelledby="single-button")
              li(role="menuitem")
                a(ng-click="vm.confirmSale()")
                  span(class="glyphicon glyphicon-usd")
                  | &nbsp; {{ 'CONFIRM' | translate }}
              li(class="divider")
              li(role="menuitem")
                a(ng-click="vm.openAddProductModal()")
                  span(class="glyphicon glyphicon-plus")
                  | &nbsp; {{ 'ADD_PRODUCT' | translate }}
              li(role="menuitem")
                a(ng-click="vm.resetCart()")
                  span(class="glyphicon glyphicon-trash")
                  | &nbsp; {{ 'RESET_CART' | translate }}
      div(class="row")
        div(class="col-md-4")
          form(class="form-horizonal", name="form", ng-submit="vm.create()", novalidate)
            div(class="form-group")
              label(class="col-sm-3", for="name") {{ 'NAME' | translate }}:
              div(class="col-sm-7")
                input(class="form-control", id="name", required, ng-model="vm.saleName", type="text", placeholder="{{ 'NAME' | translate }}")
            div(class="form-group")
              label(class="col-sm-3", for="description") {{ 'DESCRIPTION' | translate }}:
              div(class="col-sm-7")
                textarea(class="form-control", id="description", ng-model="vm.saleDescription", type="text", placeholder="{{ 'DESCRIPTION' | translate }}")
            div(class="form-group")
              label(class="col-sm-3", for="client") {{ 'CLIENT' | translate }}:
              div(class="col-sm-7")
                select(class="form-control", id="client", ng-model="vm.saleClient", ng-options="client.id as client.name for client in vm.clientsToSale", required)
                  option(value="") {{ 'NO_OPTION_SELECTED' | translate }}
      div(class="row")
        div(class="col-md-12")
          div(class="table-responsive")
            table(class="table table-striped")
              thead
                tr
                  th {{ 'NAME' | translate }}
                  th {{ 'DESCRIPTION' | translate }}
                  th {{ 'QUANTITY' | translate }}
                  th {{ 'PRICE' | translate }}
              tbody
                tr(ng-if="vm.saleProducts.length === 0")
                  td(class="text-center", colspan="4")
                    p(class="lead") {{ 'NO_PRODUCTS_ON_SALE' | translate }}
                tr(ng-repeat="product in vm.saleProducts")
                  td {{ product.name }}
                  td {{ product.description }}
                  td
                    a(href="#", editable-number="product.saleQuantity", e-min="1", e-max="{{product.quantity}}") {{ product.saleQuantity }}
                  td
                    a(href="#", editable-number="product.salePrice", e-min="1") ${{ product.salePrice }}
              tfoot(ng-show="vm.saleProducts.length > 0")
                td(colspan="3")
                td
                  strong {{ 'TOTAL' | translate }}:
                  | &nbsp; ${{ vm.calculateTotal() }}
    uib-tab(index="2", heading="{{ 'SALES_HISTORY' | translate }}")
      br
      div(class="row", ng-repeat="sale in vm.salesHistory")
        div(class="col-md-12")
          sales-history(sale="sale")
