div(class="purchase-section")
  h2(class="page-title") {{ 'TRANSACTIONS' | translate }}
  div(class="row")
    div(class="col-sm-9 col-sm-offset-3")
      div(class="btn-group pull-right", uib-dropdown)
        button(id="single-button", type="button", class="btn btn-primary", uib-dropdown-toggle, ng-disabled="disabled") &nbsp; {{Â 'ACTIONS' | translate }} &nbsp;
          span(class="caret")
        ul(class="dropdown-menu", uib-dropdown-menu, role="menu", aria-labelledby="single-button")
          li(role="menuitem")
            a(ng-click="vm.confirmTransaction()")
              span(class="glyphicon glyphicon-usd")
              | &nbsp; {{ 'CONFIRM' | translate }}
          li(class="divider")
          li(role="menuitem")
            a(ng-click="vm.openAddProductModal()")
              span(class="glyphicon glyphicon-plus")
              | &nbsp; {{ 'ADD_PRODUCT' | translate }}
          li(role="menuitem")
            a(ng-click="vm.resetCart()")
              span(class="glyphicon glyphicon-trash")
              | &nbsp; {{ 'RESET_CART' | translate }}
  div(class="row")
    div(class="col-md-6")
      form(class="form-horizonal", name="form", ng-submit="vm.create()", novalidate)
        div(class="form-group row")
          label(class="col-sm-3", for="name") {{ 'NAME' | translate }}:
          div(class="col-sm-7")
            input(class="form-control", id="name", required, ng-model="vm.transactionName", type="text", placeholder="{{ 'NAME' | translate }}")
        div(class="form-group row")
          label(class="col-sm-3") {{ 'TYPE' | translate }}:
          div(class="col-sm-7")
            label(class="radio-inline")
              input(type="radio", name="transactionType", ng-model="vm.transactionType", value="purchase")
              | {{ 'PURCHASE' | translate }}
            label(class="radio-inline")
              input(type="radio", name="transactionType", ng-model="vm.transactionType", value="sale")
              | {{ 'SALE' | translate }}
        div(class="form-group row")
          label(class="col-sm-3", for="description") {{ 'DESCRIPTION' | translate }}:
          div(class="col-sm-7")
            textarea(class="form-control", id="description", ng-model="vm.transactionDescription", type="text", placeholder="{{ 'DESCRIPTION' | translate }}")
        div(class="form-group row")
          label(class="col-sm-3", for="client") {{ 'CLIENT' | translate }}:
          div(class="col-sm-7")
            select(class="form-control", id="client", ng-model="vm.transactionClient", ng-options="client.resource_uri as client.name for client in vm.clients", required)
              option(value="") {{ 'NO_OPTION_SELECTED' | translate }}
  div(class="row")
    div(class="col-md-12")
      div(class="table-responsive")
        table(class="table table-striped")
          thead
            tr
              th(class="text-center header", colspan="5") {{ 'PRODUCTS' | translate }}
            tr
              th {{ 'NAME' | translate }}
              th {{ 'DESCRIPTION' | translate }}
              th {{ 'QUANTITY' | translate }}
              th {{ 'PRICE' | translate }}
              th
          tbody
            tr(ng-show="vm.transactionProducts.length === 0")
              td(class="text-center", colspan="5")
                p(class="lead") {{ 'NO_PRODUCTS_ON_TRANSACTION' | translate }}
            tr(ng-repeat="product in vm.transactionProducts")
              td {{ product.name }}
              td {{ product.description }}
              td
                a(href="#", editable-number="product.transactionQuantity", e-min="1") {{ product.transactionQuantity }}
              td
                a(href="#", editable-number="product.transactionPrice", e-min="1") ${{ product.transactionPrice }}
              td
                button(class="btn btn-sm", ng-click="vm.deleteTransactionProduct($index)")
                  span(class="glyphicon glyphicon-trash")
            tr(class="header")
              th(class="text-center", colspan="5") {{ 'TAXES' | translate }}
            tr(ng-repeat="tax in vm.taxes")
              th(colspan="3")
              th {{ tax.name }}
              th
                | {{ 'TAX' | translate }}:
                | ${{ tax.percent * vm.calculateSubTotal() }}
          tfoot
            tr
              td(colspan="4")
              th
                | {{ 'SUBTOTAL' | translate }}:
                | ${{ vm.calculateSubTotal() }}
            tr
              td(colspan="4")
              th
                | {{ 'TOTAL' | translate }}:
                | ${{ vm.calculateTotal() }}
